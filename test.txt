#include <avr/io.h>
#include <avr/interrupt.h>

#include <util/delay.h>
 
void InitAtmel(void);
volatile unsigned char flag=0;

ISR(INT0_vect)
{
   flag = 0x01;
}

void InitAtmel(void)
{
   DDRA = 0xff;   
   DDRB = 0xff;   
   DDRD = 0x00;//Input for INT0 on PD2
   DDRC = 0xff;//Output for LEDs
}   

//---------------------------------------------------------------
int main(void)
{
   flag = 0x00;
   cli();

   InitAtmel();
   
   GICR  |= 1<<INT0;
   MCUCR = (0<<ISC00)|(1<<ISC01);
   
   sei();



   while(1)
   {
   
   if(flag == 0x01)
   {
           PORTC = ~ 0xff;
                _delay_ms(100);
                _delay_ms(100);
      flag = 0x00;   
   }
   else
   {
      PORTC = ~ 0x01; //0x66;
                _delay_ms(100);
                _delay_ms(100);
//      flag = 0x00;
   }
   
   }

} 